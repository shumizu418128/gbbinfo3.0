![CodeRabbit Pull Request Reviews](https://img.shields.io/coderabbit/prs/github/shumizu418128/gbbinfo3.0?utm_source=oss&utm_medium=github&utm_campaign=shumizu418128%2Fgbbinfo3.0&labelColor=171717&color=FF570A&link=https%3A%2F%2Fcoderabbit.ai&label=CodeRabbit+Reviews)

[![DeepWiki](https://img.shields.io/badge/DeepWiki-shumizu418128%2Fgbbinfo3.0-blue.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAyCAYAAAAnWDnqAAAAAXNSR0IArs4c6QAAA05JREFUaEPtmUtyEzEQhtWTQyQLHNak2AB7ZnyXZMEjXMGeK/AIi+QuHrMnbChYY7MIh8g01fJoopFb0uhhEqqcbWTp06/uv1saEDv4O3n3dV60RfP947Mm9/SQc0ICFQgzfc4CYZoTPAswgSJCCUJUnAAoRHOAUOcATwbmVLWdGoH//PB8mnKqScAhsD0kYP3j/Yt5LPQe2KvcXmGvRHcDnpxfL2zOYJ1mFwrryWTz0advv1Ut4CJgf5uhDuDj5eUcAUoahrdY/56ebRWeraTjMt/00Sh3UDtjgHtQNHwcRGOC98BJEAEymycmYcWwOprTgcB6VZ5JK5TAJ+fXGLBm3FDAmn6oPPjR4rKCAoJCal2eAiQp2x0vxTPB3ALO2CRkwmDy5WohzBDwSEFKRwPbknEggCPB/imwrycgxX2NzoMCHhPkDwqYMr9tRcP5qNrMZHkVnOjRMWwLCcr8ohBVb1OMjxLwGCvjTikrsBOiA6fNyCrm8V1rP93iVPpwaE+gO0SsWmPiXB+jikdf6SizrT5qKasx5j8ABbHpFTx+vFXp9EnYQmLx02h1QTTrl6eDqxLnGjporxl3NL3agEvXdT0WmEost648sQOYAeJS9Q7bfUVoMGnjo4AZdUMQku50McDcMWcBPvr0SzbTAFDfvJqwLzgxwATnCgnp4wDl6Aa+Ax283gghmj+vj7feE2KBBRMW3FzOpLOADl0Isb5587h/U4gGvkt5v60Z1VLG8BhYjbzRwyQZemwAd6cCR5/XFWLYZRIMpX39AR0tjaGGiGzLVyhse5C9RKC6ai42ppWPKiBagOvaYk8lO7DajerabOZP46Lby5wKjw1HCRx7p9sVMOWGzb/vA1hwiWc6jm3MvQDTogQkiqIhJV0nBQBTU+3okKCFDy9WwferkHjtxib7t3xIUQtHxnIwtx4mpg26/HfwVNVDb4oI9RHmx5WGelRVlrtiw43zboCLaxv46AZeB3IlTkwouebTr1y2NjSpHz68WNFjHvupy3q8TFn3Hos2IAk4Ju5dCo8B3wP7VPr/FGaKiG+T+v+TQqIrOqMTL1VdWV1DdmcbO8KXBz6esmYWYKPwDL5b5FA1a0hwapHiom0r/cKaoqr+27/XcrS5UwSMbQAAAABJRU5ErkJggg==)](https://deepwiki.com/shumizu418128/gbbinfo3.0)
<!-- DeepWiki badge generated by https://deepwiki.ryoppippi.com/ -->

[![Better Stack Badge](https://uptime.betterstack.com/status-badges/v3/monitor/22wki.svg)](https://uptime.betterstack.com/?utm_source=status_badge)

# GBB Info 3.0

Grand Beatbox Battle (GBB) の情報を集約・提供するウェブアプリケーションです。

このサイトの詳しい説明はこちら：
[GBBINFO-JPNの設計図](https://qiita.com/tari3210/items/0561e91774863d165af0)

株式会社サポーターズ様 主催イベント「技育博 2024 Vol.5」出場作品

## 主な機能

- 過去の大会結果の閲覧
- 出場者の情報検索
- AIによる出場者情報の検索（Google Gemini, Tavily API連携）
- 多言語対応

## 使用技術

- **バックエンド**: Flask (Python)
- **フロントエンド**: HTML, CSS, JavaScript
- **データベース**: Supabase
- **AI**: Google Gemini, Tavily API
- **デプロイ**: Docker

---

## 実行方法

### 1. ローカルでの開発サーバー起動

リポジトリをクローンし、必要なライブラリをインストールします。

```sh
pip install -r requirements.txt
```

環境変数（`.env`ファイルなど）を設定した後、以下のコマンドで開発サーバーを起動します。

```sh
python run.py
```

サーバーは `http://localhost:10000` で起動します。

### 2. Dockerでの実行

以下のコマンドでDockerイメージをビルドし、コンテナを実行します。

```sh
# Dockerイメージのビルド
docker build -t gbbinfo .

# Dockerコンテナの実行
docker run -p 10000:10000 --env-file .env gbbinfo
```

---

## ディレクトリ構成の概要

```
gbbinfo3.0/
├── run.py                    # アプリケーション起動スクリプト
├── app/
│   ├── main.py               # Flaskアプリケーションのインスタンス、ルーティング定義
│   ├── settings.py           # アプリケーション設定
│   ├── models/               # データベースや外部APIのクライアント
│   │   ├── supabase_client.py
│   │   └── gemini_client.py
│   ├── views/                # 各エンドポイントの処理ロジック
│   ├── templates/            # HTMLテンプレート
│   ├── static/               # CSS, JavaScript, 画像ファイル
│   └── translations/         # 翻訳ファイル (Flask-Babel)
├── requirements.txt          # Pythonライブラリの依存関係
└── Dockerfile                # Dockerコンテナ定義
```

---

## 翻訳ファイルの更新手順 (Flask-Babel)

本プロジェクトでは `Flask-Babel` を利用して多言語対応を行っています。

### 1. 翻訳対象のテキストを抽出

以下のコマンドを実行し、ソースコードから翻訳対象の文字列を抽出し、`messages.pot`ファイルを更新します。

```sh
pybabel extract -F app/babel.cfg -o app/messages.pot app/
```

### 2. 各言語の翻訳ファイルを更新

`.pot`ファイルの更新内容を、各言語の`.po`ファイルに反映させます。

```sh
pybabel update -i app/messages.pot -d app/translations
```

### 3. 翻訳ファイルを編集

`app/translations/<言語コード>/LC_MESSAGES/messages.po` ファイルを開き、`msgstr` に翻訳後のテキストを追記・修正します。

### 4. 翻訳ファイルをコンパイル

編集した`.po`ファイルを、アプリケーションが利用する`.mo`ファイルにコンパイルします。

```sh
pybabel compile -d app/translations
```
